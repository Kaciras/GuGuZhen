# 咕咕镇自动游戏教程

本项目中自带的策略都是以保持稳定为原则，旨在解决重复的操作。它不会帮你升段、智能选择更强的卡片、装备、光环等等，这些更复杂的操作需要手动完成，如果需要自动化这部分你可以编写自己的脚本。

# 内置策略

## CheckVersion

检查游戏的版本，如果与当前版本的更新日期不同则结束，不会执行后面的动作。在运行脚本前检查版本是一个好习惯，可以避免运行过时的策略，所有的版本见：[更新日志](https://www.guguzhen.com/fyg_ulog.php)

该策略接受一个日期字符串参数，比如：

```python
CheckVersion("2021/10/20")
```

## Wish

去许愿池许愿，参数为许愿次数，如果当前次数小于该值则许愿到直到该次数为止。

```python
Wish(10)
```

## OpenGift

去好运奖励抽奖，如果今日还没抽过，则抽一次，并执行参数中的额外抽奖规则。

```python
GetGift([
	# 如果奖池中剩余的光环大于 5 且下一张卡的星沙消耗不大于 4，则使用星沙翻卡，
	GiftSandRule("光环", value=5, limit=4),

	# 可以有多个额外抽奖规则，任意一个满足就会则使用星沙翻卡。
	GiftSandRule("卡片", value=3, limit=6)
]),
```

## Profile

角色配置，定义了所使用的卡片、天赋、装备和背包护身符，运行该策略将切换它们，可用于一键换装。

```python
Profile(
    # 光环天赋
    talent=[Talent.点到为止, Talent.破魔之心, Talent.飓风之力],
    
    # 卡片的 ID
    card_id=114514,
    
    # 身上穿的装备，分别是武器、手环、衣服、发饰
    equipment=['-J0q_xwe', 'wiYKRp9I', 'GytTkvWh', 'ZXJCjCF7'],
    
    # 背包物品，超出容量的将被忽略
    backpack=['o_-nffub', '4nW3P5AM', 'ifCtQpW1', 'a6tP_GIy', 'o_-nffub', 'o_-nffub', 'o_-nffub',
    		'a6tP_GIy', 'Baqhh56G']
)
```

每个参数都可以为 `None`，表示不切换。

装备和背包物品使用一个 8 位 base64 字符串的 Hash 表示，所有的物品和卡片可以通过以下命令查看：

```
python main.py items [-short]
```

`-short` 参数表示省略物品内容，只显示 Hash。

### 物品的表示方法

由于装备的 ID 在背包、海滩、仓库中都不同，没法方便地用一个 ID 表示，所以本项目采用了 Hash 来区分物品。物品的 Hash 值由其内容计算，比如护身符就是等级、品质、类型、强化次数以及所有的增益属性，显然 Hash 相等的物品其内容完全一致，可以认为是同一个，所以这种方法是可行的。

在用 Hash 表示物品时，可能遇到多个物品有相同的 Hash，这没有问题，因为 Hash 相同则效果也相同，换装时将随机选择其中的一个。

注意如果有隐藏属性，比如护身符的隐藏分是无法包含在 Hash 中的，但由于无法获取它，所以忽略。

## Beach

去海滩捡垃圾

## PK

进行争夺战场
